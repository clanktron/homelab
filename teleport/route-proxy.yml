---
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRouteTCP
metadata:
  name: teleport-proxy
  namespace: teleport
spec:
  entryPoints:
    - proxy-teleport
  routes:
    - match: HostSNI(`*`)
      # kind: Rule
      # middlewares:
      #   - name: traefik-local-whitelist@kubernetescrd
      services:
      - name: teleport
        port: 3024
        # serversTransport: insecure-skip-verify
  # tls:
  #   secretName: teleport-tls

# ---
# apiVersion: traefik.containo.us/v1alpha1
# kind: ServersTransport
# metadata:
#   name: insecure-skip-verify
#   namespace: teleport
# spec:
#   insecureSkipVerify: true
