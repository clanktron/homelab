apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: gitlab
spec:
  destination:
    name: ''
    namespace: gitlab
    server: 'https://kubernetes.default.svc'
  source:
    path: ''
    repoURL: 'https://charts.gitlab.io/'
    targetRevision: 6.0.1
    chart: gitlab
    helm:
      values: |-
        global:
          hosts:
            domain: claytonc.dev

          ingress:
            configureCertmanager: false
            enabled: false

        certmanager:
          installCRDs: false
          install: false

        nginx-ingress:
          enabled: false

        prometheus:
          install: true
        
        upgradeCheck:
          enabled: false

        gitlab-runner:
          install: true

        gitlab:
          toolbox:
            replicas: 1
  project: default
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - PruneLast=true
      - ApplyOutOfSyncOnly=true
